<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

      <title>Smart Devices</title>
    
          <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="_static/theme.css " type="text/css" />
          <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="_static/theme-vendors.js"></script> -->
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="API Reference" href="api-reference/index.html" />
  <link rel="prev" title="IPC" href="ipc.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <span class="site-name">Runtime</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#runtime-documentation">Contents:</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="design.html" class="reference internal ">Design Goals</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="architecture.html" class="reference internal ">Architecture</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="ipc.html" class="reference internal ">IPC</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">Smart Devices</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#protocol-specification" class="reference internal">Protocol Specification</a></li>
                
                  <li class="toctree-l2"><a href="#device-list" class="reference internal">Device List</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="api-reference/index.html" class="reference internal ">API Reference</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>Smart Devices</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="ipc.html"
       title="previous chapter">← IPC</a>
  </li>
  <li class="next">
    <a href="api-reference/index.html"
       title="next chapter">API Reference →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="smart-devices">
<h1>Smart Devices<a class="headerlink" href="#smart-devices" title="Permalink to this headline">¶</a></h1>
<p>Robots use Smart Devices to interact with the environment through sensing or actuation.
Currently, each Smart Device (SD) consists of an Arduino Micro mounted on a custom printed circuit board.
A <a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">Raspberry Pi 4 Model B</a>, the kit’s central single-board computer (SBC), communicates with the Arduinos over USB serial.</p>
<p>Historically, PiE manufactured custom cables and boards to support real-time communication and flexible configuration.
However, custom hardware hampered debugging and development, and the kit’s SBC at the time, the Beaglebone Black (BBB), did not provide real-time guarantees anyway.
As a result, the kit shifted towards cheap commodity hardware like Arduino and USB, which are well-tested, enjoy widespread software support, and are relatively simple.</p>
<p>During the spring 2017 season, PiE considered using USB HID, used for peripherals like keyboards and mice, to circumvent the BBB’s hardware limit on the number of USB CDC devices.
However, the HID abstraction proved too difficult to use.
A USB OTG hack for chaining USB hubs was required to raise the limit of six devices.</p>
<section id="protocol-specification">
<h2>Protocol Specification<a class="headerlink" href="#protocol-specification" title="Permalink to this headline">¶</a></h2>
<p>The Smart Device Protocol is a duplex packet-based protocol layered on a reliable transport like USB serial for communication between an SBC running Runtime and a Smart Device.
PiE chose a packet-based protocol to support heterogenous and relatively low-frequency messages (for example, an update about every 50 ms).</p>
<p>Each Smart Device has between zero and 16 (inclusive) parameters:</p>
<ul>
<li><p>Each parameter has a unique unsigned 8-bit integer identifier, incrementing from zero.
An <code class="docutils literal notranslate"><span class="pre">N</span></code>-parameter device has parameters with IDs <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">...,</span> <span class="pre">N-1</span></code>.</p></li>
<li><p>Each parameter has a unique human-readable name.
There are no formal restrictions, but snake case names are preferred.</p></li>
<li><p>Each parameter is either read-only, write-only, or readable and writeable.</p></li>
<li><p>Each parameter has a data type.
Similar to standard C types, the supported types are:</p>
<table class="hlist"><tr><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code> (1 byte)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uint8_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int8_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uint16_t</span></code></p></li>
</ul>
</td><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int16_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int32_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uint64_t</span></code></p></li>
</ul>
</td><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int64_t</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code> (4 bytes)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">double</span></code> (8 bytes)</p></li>
</ul>
</td></tr></table>
<p>As implied by its name, an <code class="docutils literal notranslate"><span class="pre">(u)intNN_t</span></code> integral type is exactly <code class="docutils literal notranslate"><span class="pre">NN/8</span></code> bytes wide.
The <code class="docutils literal notranslate"><span class="pre">u</span></code> prefix denotes an unsigned type.
An integral type without the <code class="docutils literal notranslate"><span class="pre">u</span></code> prefix is signed.</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For some boards, Arduino’s <code class="docutils literal notranslate"><span class="pre">double</span></code> type is as wide as its <code class="docutils literal notranslate"><span class="pre">float</span></code> type: 4 bytes.
Avoid adding parameters with the <code class="docutils literal notranslate"><span class="pre">double</span></code> type unless the Smart Device’s microcontroller actually produces doubles eight bytes wide, as required.</p>
</div>
<section id="message-format">
<h3>Message Format<a class="headerlink" href="#message-format" title="Permalink to this headline">¶</a></h3>
<p>Every message (packet) follows a basic format:</p>
<div class="figure" id="id1" style="text-align: center"><p><img  src="_images/tikz-76e12b42c6b91ab72e5281abc45ca6cb48ea884e.svg" alt="Figure made with TikZ" /></p>
<p><span class="caption-text">Message Format</span></p>
</div><ul class="simple">
<li><p>The message ID is an unsigned 8-bit integer, which specifies the message’s type and determines the payload format.</p></li>
<li><p>The payload length is an 8-bit unsigned integer specifying the number of bytes in the payload.
The payload can be up to 255 bytes long (inclusive).</p></li>
<li><p>The checksum is the XOR of every other byte in the message (the portion shown in blue).</p></li>
</ul>
</section>
<section id="uid-format">
<h3>UID Format<a class="headerlink" href="#uid-format" title="Permalink to this headline">¶</a></h3>
<p>Each Smart Device is assigned a unique 88-bit identifier (UID) at compile time:</p>
<div class="figure" id="id2" style="text-align: center"><p><img  src="_images/tikz-80910c87954b6c67f04dc2a5952784c6d5deb1fa.svg" alt="Figure made with TikZ" /></p>
<p><span class="caption-text">UID Format</span></p>
</div><ul class="simple">
<li><p>The device ID is an unsigned 8-bit integer, which specifies the device’s type.</p></li>
<li><p>The year is an unsigned 8-bit integer specifying what competition the device was manufactured for.
Year <code class="docutils literal notranslate"><span class="pre">0x00</span></code> corresponds to the spring 2016 season, and each subsequent season increments the year ID.
(Although PiE strives to hold a competition annually, the year ID would not increment in a year where PiE is unable to.)</p></li>
<li><p>The random portion of the UID is randomly generated to ensure UID uniqueness.
In any given year, the probability of a collision with 1000 of one type of device is roughly 0.05%.
This is a generous upperbound on the actual collision likelihood, since PiE typically produces many times fewer of even the most common device, motor controllers.</p></li>
</ul>
</section>
<section id="message-types">
<h3>Message Types<a class="headerlink" href="#message-types" title="Permalink to this headline">¶</a></h3>
<table class="compact-table colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Message Types</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 6%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x10</span></code></p></td>
<td><p>Ping</p></td>
<td><p>SBC → SD</p></td>
<td><p>The SBC pings the SD for enumeration purposes.
The SD responds with a subscription response.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x11</span></code></p></td>
<td><p>Subscription
Request</p></td>
<td><p>SBC → SD</p></td>
<td><p>The SBC requests data to be returned asynchronously
at a given constant interval (delay) for some parameters.
The SD responds with a subscription response.</p>
<ul class="simple">
<li><p>Only one subscription may exist at a time.</p></li>
<li><p>A requested delay of zero indicates the SBC does not wish
to receive data, which disables any existing subscription.</p></li>
<li><p>However, subscribing to zero parameters with a nonzero
delay will still cause the SD to send empty updates.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x12</span></code></p></td>
<td><p>Subscription
Response</p></td>
<td><p>SBC ← SD</p></td>
<td><p>The SD acknowledges a subscription with its subscription
status and <a class="reference external" href="#uid-format">UID</a>.</p>
<ul class="simple">
<li><p>The returned delay and parameter bitmap are how the SD
will actually send updates, which may differ from what the
SBC requested. For example, the SBC may incorrectly
subscribe to nonexistent or write-only parameters.</p></li>
<li><p>The SD may break up updates across multiple device data packets,
especially if the SBC subscribes to many wide parameters.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x13</span></code></p></td>
<td><p>Device Read</p></td>
<td><p>SBC → SD</p></td>
<td><p>The SBC requests some values from the SD. The SD responds
with zero or more device data packets with values for all
readable parameters requested.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x14</span></code></p></td>
<td><p>Device Write</p></td>
<td><p>SBC → SD</p></td>
<td><p>The SBC attempts to write some values to the SD. The SD
responds with zero or more device data packets describing
all the readable parameters that were successfully written to.
There is no acknowledgement for write-only parameters.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x15</span></code></p></td>
<td><p>Device Data</p></td>
<td><p>SBC ← SD</p></td>
<td><p>The SD sends values of readable parameters to the SBC.
This can occur in response to a device read/write or as
part of a subscription update.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x16</span></code></p></td>
<td><p>Device
Disable</p></td>
<td><p>SBC → SD</p></td>
<td><p>The SBC attempts to disable the SD, which ceases all
operation for safety reasons.
The SD continues to respond to packets and may resume operation without power cycling.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x17</span></code></p></td>
<td><p>Heartbeat
Request</p></td>
<td><p>SBC ↔ SD</p></td>
<td><p>Either the SBC or the SD requests the other endpoint to send
a heartbeat response, which should be sent back immediately.
The payload (ID) is currently unused, but may be used for
tracking outstanding requests to measure latency.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x18</span></code></p></td>
<td><p>Heartbeat
Response</p></td>
<td><p>SBC ↔ SD</p></td>
<td><p>The endpoint receiving a heartbeat request should send back
a heartbeat response with the request’s ID.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0xFF</span></code></p></td>
<td><p>Error</p></td>
<td><p>SBC ← SD</p></td>
<td><p>The SD indicates to the SBC an error has occurred.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid chatter, subscriptions are generally preferred over device reads (polling) for regular updates.
The delay between updates is also likely to be more consistent.</p>
</div>
<p>The payload format of each message type is shown below.
The endianness of each multi-byte segment is determined by the endianness of the particular board.
Arduino Micros are little-endian (least significant byte first).</p>
<div class="figure" id="id4" style="text-align: center"><p><img  src="_images/tikz-c4ed872299daadb32406a5532926a8d1279dfd5a.svg" alt="Figure made with TikZ" /></p>
<p><span class="caption-text">Payload Formats</span></p>
</div><ul class="simple">
<li><p>Some payloads begin with a <code class="docutils literal notranslate"><span class="pre">Params</span></code> bitmap to reference a subset of the device’s parameters.
The parameter with ID <code class="docutils literal notranslate"><span class="pre">i</span></code> is included if and only if bit <code class="docutils literal notranslate"><span class="pre">i</span></code> is one, with the bitmap’s least significant bit defined as the 0th bit.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Delay</span></code> field of subscription request/response packets is an unsigned 8-bit integer specifying the number of milliseconds between updates.</p></li>
<li><p>Device write and device data packets order values by ascending parameter ID.
The sum of the widths of the included parameters’ types must equal the length of the values segment.</p></li>
<li><p>The Smart Device Protocol is asynchronous, meaning messages may be interspersed in whatever order either endpoint chooses.
For example, it is valid for an endpoint to have two in-flight heartbeat requests.
The endpoint need not block sending the second heartbeat request until the first heartbeat response returns.</p></li>
<li><p>A Smart Device may disable itself for safety reasons if it does not receive a valid packet from the SBC after some time.</p></li>
</ul>
<table class="docutils align-center" id="id5">
<caption><span class="caption-text">Error Codes</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0xFD</span></code></p></td>
<td><p>Unexpected packet delimiter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0xFE</span></code></p></td>
<td><p>Checksum error</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0xFF</span></code></p></td>
<td><p>Generic error</p></td>
</tr>
</tbody>
</table>
</section>
<section id="transport">
<h3>Transport<a class="headerlink" href="#transport" title="Permalink to this headline">¶</a></h3>
<p>When the Smart Device Protocol is layered on a bytestream-based transport like USB serial, the communication endpoints must delimit packet boundaries with a null byte (<code class="docutils literal notranslate"><span class="pre">0x00</span></code>) and encode each packet with <a class="reference external" href="https://en.wikipedia.org/wiki/Consistent_Overhead_Byte_Stuffing">Consistent Overhead Byte Stuffing (COBS)</a> before placement on the wire.
At the cost of slightly expanding each message (proportional to the message’s length), COBS ensures encoded messages are free of the null byte.
This encoding allows the bytestream to transport variable-length messages without requiring endpoints to maintain packet length state.</p>
</section>
</section>
<section id="device-list">
<h2>Device List<a class="headerlink" href="#device-list" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">LimitSwitch</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x00</span></code>)</dt><dd><p>Detects whether three switches are open or closed.
The switches are open, by default.</p>
<table class="colwidths-given docutils align-center" id="id6">
<caption><span class="caption-text">Limit Switch Board and Switches</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-default">
<img alt="_images/limit-switch.png" src="_images/limit-switch.png" />
</figure>
</td>
<td><figure class="align-default">
<img alt="_images/switches.png" src="_images/switches.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id7">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">switch0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td rowspan="3"><p>True when a switch
is closed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">switch1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">switch2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LineFollower</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x01</span></code>)</dt><dd><p>Three colinear brightness sensors used to detect and follow reflective tape on the floor.
The line follower works best when the sensors are as close to the ground as possible.</p>
<table class="colwidths-given docutils align-center" id="id8">
<caption><span class="caption-text">Line Follower Board and Head</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-default">
<img alt="_images/line-follower.png" src="_images/line-follower.png" />
</figure>
</td>
<td><figure class="align-default">
<img alt="_images/line-follower-head.png" src="_images/line-follower-head.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id9">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">left</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td rowspan="3"><p>Intensities are between 0 and 1,
where 0 denotes complete darkness
and 1 denotes complete reflection.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">center</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">right</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Potentiometer</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x02</span></code>)</dt><dd><p>Detects the angle of three rotating dials.
The track spans only a circular sector, not the full disk.</p>
<table class="compact-table docutils align-center" id="id10">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 9%" />
<col style="width: 11%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pot0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td rowspan="3"><p>Rotations are between 0 and
1, which correspond to the
two ends of the sector.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pot1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pot2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Encoder</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x03</span></code>)</dt><dd><p>Detects angular position like the potentiometer, but for a continuously rotating joint.</p>
<table class="compact-table docutils align-center" id="id11">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 18%" />
<col style="width: 14%" />
<col style="width: 9%" />
<col style="width: 10%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rotation</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>A position in encoder ticks
(4400 per revolution).</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BatteryBuzzer</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x04</span></code>)</dt><dd><p>Monitors battery voltages and cell balances.
The power distribution board (PDB) is shown below (left):</p>
<ul class="simple">
<li><p>Closing the circuitbreaker’s yellow switch in the center switches on the PDB.
Pressing the circuitbreaker’s red button opens the switch.</p></li>
<li><p>Horizontal Anderson connectors, which power motors, populate the PDB’s right side.
Following convention, the black connectors stand for ground, the red for power.
The motors use vertically stacked Andersons that can only be plugged into a motor controller, not directly into the PDB, to discourage such an accident.</p></li>
<li><p>ATX connectors, which power servos and the Raspberry Pi, populate the PDB’s left side.</p></li>
<li><p>The buzzer in the bottom left corner beeps once when switched on under normal operation, and beeps continuously when the battery condition is unsafe.</p></li>
<li><p>The ATX connectors above the buzzer connect to the battery.</p></li>
<li><p>The seven-segment display in the bottom right corner shows the battery’s voltage.</p></li>
<li><p>The Arduino is optional.
The buzzer works even without the Arduino.</p></li>
</ul>
<p>The LIPO battery (shown below, right) contains three separate cells with their own voltages that are connected in parallel.
Using a battery under unsafe conditions may permanently damage the battery and pose an electrical or fire risk.
Generally, an acceptable battery voltage ranges from about 10.5V to 12V.
Avoid overcharging batteries by leaving them unsupervised for more than several hours.</p>
<table class="colwidths-given docutils align-center" id="id12">
<caption><span class="caption-text">Power Distribution Board and Battery</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-default">
<img alt="_images/pdb.png" src="_images/pdb.png" />
</figure>
</td>
<td><figure class="align-default">
<img alt="_images/battery.png" src="_images/battery.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id13">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">is_unsafe</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>True when the battery voltage
is too low or the cells are
too imbalanced for safe use.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">calibrated</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>True if the battery has been
calibrated (calibration
voltage is stored in EEPROM).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_cell1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td rowspan="3"><p>Voltages (in Volts) of each
of the three cells.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_cell2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_cell3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x5</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_batt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>The overall battery voltage
(in Volts). Alias for
<code class="docutils literal notranslate"><span class="pre">v_cell3</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x6</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dv_cell2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_cell2</span></code> minus <code class="docutils literal notranslate"><span class="pre">v_cell1</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x7</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dv_cell3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">v_cell3</span></code> minus <code class="docutils literal notranslate"><span class="pre">v_cell2</span></code>.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TeamFlag</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x05</span></code>)</dt><dd><p>Powers colored LEDs to indicate the robot’s team.</p>
<table class="docutils align-center" id="id14">
<caption><span class="caption-text">Team Flag</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-center" style="width: 30%">
<img alt="_images/team-flag.png" src="_images/team-flag.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id15">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>True if all LEDs are enabled (not
necessarily on).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">blue</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td rowspan="2"><p>True if the LED color is enabeld.
Technically, these flags allow both
colors to be enabled simultaneously.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">yellow</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">led1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td rowspan="4"><p>Each color can light up to four
individual LEDs to allow for varying
degrees of brightness. These
parameters are true if the
corresponding LEDs are active.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">led2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x5</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">led3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x6</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">led4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Grizzly</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x06</span></code>)</dt><dd><p>The discontinued Grizzly Bear motor controller.
No parameters are specified, but the device ID is reserved for future use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ServoControl</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x07</span></code>)</dt><dd><p>Controls a pair of servo motors, which do not spin continuously and are best used for joints.</p>
<table class="colwidths-given docutils align-center" id="id16">
<caption><span class="caption-text">Servo Controller and Servo Motor</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-default">
<img alt="_images/servo-controller.png" src="_images/servo-controller.png" />
</figure>
</td>
<td><figure class="align-default">
<img alt="_images/servo.png" src="_images/servo.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id17">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 18%" />
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">servo0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td rowspan="2"><p>A position between
-1 and 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">servo1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LinearActuator</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x08</span></code>)</dt><dd><p>An extensible joint creating translational motion.
No such device exists yet, but the device ID is reserved for future use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ColorSensor</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x09</span></code>)</dt><dd><p>Color sensor.
No such device exists yet, but the device ID is reserved for future use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">YogiBear</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x0A</span></code>)</dt><dd><p>A discontinued COTS motor controller.
It has the same behavior and parameters as the <code class="docutils literal notranslate"><span class="pre">PolarBear</span></code> (see below).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RFID</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x0B</span></code>)</dt><dd><p>Detects radio-frequency identifiers.
Because of hardware quirks, this sensor can sometimes be slow or report false negatives.
The RFID sensor also works best at very close range (0.5 inches is about the maximum range).</p>
<table class="docutils align-center" id="id18">
<caption><span class="caption-text">RFID Reader</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-center" style="width: 50%">
<img alt="_images/rfid.png" src="_images/rfid.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id19">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 9%" />
<col style="width: 22%" />
<col style="width: 14%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>The identifier. If <code class="docutils literal notranslate"><span class="pre">detect_tag</span></code>
is false, this parameter is undefined.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">detect_tag</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>True if a tag is detected.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PolarBear</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x0C</span></code>)</dt><dd><p>The COTS motor controller that succeeded the Yogi Bear.
If equipped with a position encoder, the Polar Bear can supposedly perform PID to track position and velocity setpoints.
It has a unique safety feature: it disables itself if Runtime does not respond to the Polar Bear’s heartbeat requests.</p>
<table class="colwidths-given docutils align-center" id="id20">
<caption><span class="caption-text">Polar Bear and DC Motor</span><a class="headerlink" href="#id20" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-default">
<img alt="_images/polar-bear.png" src="_images/polar-bear.png" />
</figure>
</td>
<td><figure class="align-default">
<img alt="_images/motor.png" src="_images/motor.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<table class="compact-table docutils align-center" id="id21">
<caption><span class="caption-text">Parameter Information</span><a class="headerlink" href="#id21" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 25%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Read?</p></th>
<th class="head"><p>Write?</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">duty_cycle</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Between -1 and 1. The sign
indicates the direction the
motor should run in, and a
greater duty cycle magnitude
corresponds to a faster speed
(more current).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_pos_setpoint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
<td><p>A position in encoder ticks.
There are 4400 ticks per
revolution, and the sensor
has a resolution of a 100
ticks. That is, the motor can
rotate by up to 100 ticks per
read cycle.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_pos_kp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
<td rowspan="3"><p>The PID coefficients for
position tracking. Defaults
to 1 for the proportional
term and 0 for the others.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_pos_ki</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_pos_kd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x5</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_vel_setpoint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
<td><p>A velocity (encoder ticks
per second).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x6</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_vel_kp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
<td rowspan="3"><p>The PID coefficients for
velocity tracking. Defaults
to 1 for the proportional
term and 0 for the others.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x7</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_vel_ki</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0x8</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pid_vel_kd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0x9</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">current_thresh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
<td><p>Current threshold in Amperes.
The hardware also enforces a
current limit.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0xA</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">enc_pos</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Encoder position in ticks.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0xB</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">enc_vel</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Encoder velocity in ticks per
second.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0xC</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">motor_current</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Motor current usage in
Amperes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">0xD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">deadband</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Deadband between 0 and 1.
Duty cycles with a magnitude
less than the deadband will
not activate the motor.</p></td>
</tr>
</tbody>
</table>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DistanceSensor</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x10</span></code>)</dt><dd><p>Detects distance using a technology like LIDAR or ultrasound.
No such device exists yet, but the device ID is reserved for future use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetalDetector</span></code> (ID: <code class="docutils literal notranslate"><span class="pre">0x11</span></code>)</dt><dd><p>Detects the metals.
No such device exists yet, but the device ID is reserved for future use.</p>
</dd>
</dl>
</section>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="ipc.html"
       title="previous chapter">← IPC</a>
  </li>
  <li class="next">
    <a href="api-reference/index.html"
       title="next chapter">API Reference →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2021, Pioneers in Engineering.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>