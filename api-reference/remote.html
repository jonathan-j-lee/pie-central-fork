<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

      <title>runtime.remote</title>
    
          <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="../_static/theme.css " type="text/css" />
          <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="../_static/theme-vendors.js"></script> -->
      <script src="../_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="runtime.service" href="service.html" />
  <link rel="prev" title="runtime.process" href="process.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../index.html" class="home-link">
    
      <span class="site-name">Runtime</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../index.html#runtime-documentation">Contents:</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 ">
            
              <a href="../design.html" class="reference internal ">Design Goals</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="../architecture.html" class="reference internal ">Architecture</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="../ipc.html" class="reference internal ">IPC</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="../smart-devices.html" class="reference internal ">Smart Devices</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="index.html" class="reference internal ">API Reference</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="index.html">API Reference</a> &raquo;</li>
    
    <li><code class="docutils literal notranslate"><span class="pre">runtime.remote</span></code></li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="process.html"
       title="previous chapter">← <code class="docutils literal notranslate"><span class="pre">runtime.process</span></code></a>
  </li>
  <li class="next">
    <a href="service.html"
       title="next chapter"><code class="docutils literal notranslate"><span class="pre">runtime.service</span></code> →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="module-runtime.remote">
<span id="runtime-remote"></span><h1><code class="docutils literal notranslate"><span class="pre">runtime.remote</span></code><a class="headerlink" href="#module-runtime.remote" title="Permalink to this headline">¶</a></h1>
<p>Remote (procedure) calls.</p>
<p>Much like <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>’s transports and protocols, this module is divided into
low-level and high-level APIs:</p>
<ul class="simple">
<li><p>The low-level API, <a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> and its implementations, deal with transporting
discrete binary messages and managing the underlying transport.</p></li>
<li><p>The high-level API, <a class="reference internal" href="#runtime.remote.Endpoint" title="runtime.remote.Endpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Endpoint</span></code></a> and its implementations, implement
request/response semantics. Most consumers should use the high-level API.</p></li>
</ul>
<p>This remote call message format is based on <a class="reference external" href="https://github.com/msgpack-rpc/msgpack-rpc/blob/master/spec.md">MessagePack-RPC</a>, except this module uses
<code class="xref py py-mod docutils literal notranslate"><span class="pre">cbor2</span></code> for serialization.</p>
<p>Every application (process) typically creates a single <a class="reference internal" href="#runtime.remote.Handler" title="runtime.remote.Handler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Handler</span></code></a> bound to one or
more <a class="reference internal" href="#runtime.remote.Service" title="runtime.remote.Service"><code class="xref py py-class docutils literal notranslate"><span class="pre">Service</span></code></a> instances. The handler encapsulates the application’s business
logic and state, while each service exposes the handler’s methods to a different
transport.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="runtime.remote.RemoteCallError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">RemoteCallError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#RemoteCallError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.RemoteCallError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="exception.html#runtime.exception.RuntimeBaseException" title="runtime.exception.RuntimeBaseException"><code class="xref py py-class docutils literal notranslate"><span class="pre">runtime.exception.RuntimeBaseException</span></code></a></p>
<p>Error produced by executing a remote call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – A human-readable description of the exception.</p></li>
<li><p><strong>context</strong> (<em>Any</em>) – Machine-readable data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Client">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">node</span></em>, <em class="sig-param"><span class="pre">concurrency=1</span></em>, <em class="sig-param"><span class="pre">logger=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">requests=&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Client" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#runtime.remote.Endpoint" title="runtime.remote.Endpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">runtime.remote.Endpoint</span></code></a></p>
<p>An endpoint for issuing remote calls.</p>
<p>A request is matched to its response with a message ID, a 32-bit integer unique
among in-flight requests at any given time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requests</strong> (<a class="reference internal" href="#runtime.remote.RequestTracker" title="runtime.remote.RequestTracker"><em>runtime.remote.RequestTracker</em></a><em>[</em><em>Any</em><em>]</em>) – Stores in-flight message IDs to futures. Each future represents the
outcome of a call (a result or an exception).</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><em>runtime.remote.Node</em></a>) – A node for transporting messages.</p></li>
<li><p><strong>concurrency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The number of workers for processing responses.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Client.issue_call">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">issue_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">notification</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Client.issue_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Client.issue_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a remote procedure call and possibly wait for the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Method name.</p></li>
<li><p><strong>args</strong> (<em>Any</em>) – Method arguments.</p></li>
<li><p><strong>address</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – A transport-dependent address.</p></li>
<li><p><strong>notification</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – False iff this call requires a response. Has no effect for
nodes that cannot receive data, which can <em>only</em> send notifications.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Maximum duration (in seconds) to wait for a response.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/asyncio-exceptions.html#asyncio.TimeoutError" title="(in Python v3.10)"><strong>asyncio.TimeoutError</strong></a> – The request was successfully sent, but the response
    never arrived in time.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> – If the request tracker could not generate a unique message ID.</p></li>
<li><p><a class="reference internal" href="#runtime.remote.RemoteCallError" title="runtime.remote.RemoteCallError"><strong>RemoteCallError</strong></a> – If the service returned an error.</p></li>
<li><p><strong>cbor2.CBOREncodeError</strong> – If the arguments were not serializable.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notification calls will not raise an exception client-side if the server
fails, even if the node supports duplex communication.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="runtime.remote.Client.call">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">call</span></span><em class="property"><span class="pre">:</span> <span class="pre">runtime.remote.CallFactory</span></em><a class="headerlink" href="#runtime.remote.Client.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Syntactic sugar for issuing remote procedure calls.</p>
<p>Instead of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">issue_call</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Replace with either of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">[</span><span class="s1">&#39;add&#39;</span><span class="p">](</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.DatagramNode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">DatagramNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">frozenset({})</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#DatagramNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.DatagramNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">runtime.remote.Node</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.protocols.DatagramProtocol</span></code></p>
<p>A wrapper around <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>’s datagram support.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Hostname.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Port number.</p></li>
<li><p><strong>bind</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Whether to bind the socket to a local address or connect to a remote one.</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection" title="(in Python v3.10)"><em>collections.abc.Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>typing.Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>]</em><em>]</em><em>]</em>) – Socket options in the form <cite>(level, option, value)</cite> passed to
<a class="reference external" href="https://docs.python.org/3/library/socket.html#socket.socket.setsockopt" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.setsockopt()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.DatagramNode.from_address">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">frozenset({})</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#DatagramNode.from_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.DatagramNode.from_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a datagram node from an address.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The address to parse, in the form <code class="docutils literal notranslate"><span class="pre">udp://[hostname[:port]]</span></code>.</p></li>
<li><p><strong>bind</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – True if this is a local address (socket is bound). False for a remote
address (socket connects).</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection" title="(in Python v3.10)"><em>collections.abc.Collection</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>typing.Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>]</em><em>]</em><em>]</em>) – Socket options passed to <a class="reference internal" href="#runtime.remote.DatagramNode" title="runtime.remote.DatagramNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatagramNode</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> – If the address is not a valid UDP address.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Endpoint">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">node</span></em>, <em class="sig-param"><span class="pre">concurrency=1</span></em>, <em class="sig-param"><span class="pre">logger=&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>A source or destination of messages.</p>
<p>An <a class="reference internal" href="#runtime.remote.Endpoint" title="runtime.remote.Endpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Endpoint</span></code></a> has a number of workers (instances of <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>)
that listen for and process incoming messages. This allows for request pipelining.
Once all workers are busy processing messages, the node wrapped by the endpoint
buffers any additional messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><em>runtime.remote.Node</em></a>) – The message transceiver. Not all node/endpoint pairs are compatible.</p></li>
<li><p><strong>concurrency</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The number of workers.</p></li>
<li><p><strong>logger</strong> (<a class="reference external" href="https://structlog.org/en/21.1.0/api.html#structlog.stdlib.AsyncBoundLogger" title="(in structlog v21.1.0)"><em>structlog.stdlib.AsyncBoundLogger</em></a>) – A logger instance.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Endpoint.handle_message">
<em class="property"><span class="pre">abstract</span> <span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">handle_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message_type</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Endpoint.handle_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Endpoint.handle_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<em>Any</em>) – The address of the message’s sender, if available. The semantics
depend on the node. Pass this argument directly to <a class="reference internal" href="#runtime.remote.Node.send" title="runtime.remote.Node.send"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.send()</span></code></a>.</p></li>
<li><p><strong>message_type</strong> (<a class="reference internal" href="#runtime.remote.MessageType" title="runtime.remote.MessageType"><em>runtime.remote.MessageType</em></a>) – The message type.</p></li>
<li><p><strong>message</strong> (<em>Any</em>) – Other message parts. The message type determines the format.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> – If the endpoint could not unpack part of the message.</p></li>
<li><p><a class="reference internal" href="#runtime.remote.RemoteCallError" title="runtime.remote.RemoteCallError"><strong>RemoteCallError</strong></a> – If the endpoint could not otherwise process the message.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Handler">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Handler</span></span><a class="reference internal" href="../_modules/runtime/remote.html#Handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>An object whose bound methods are exposed to remote callers.</p>
<p>Define a handler by subclassing <a class="reference internal" href="#runtime.remote.Handler" title="runtime.remote.Handler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Handler</span></code></a> and applying the <a class="reference internal" href="#runtime.remote.route" title="runtime.remote.route"><code class="xref py py-func docutils literal notranslate"><span class="pre">route()</span></code></a>
decorator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CustomHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@route</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">method1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="gp">... </span>        <span class="o">...</span>
<span class="gp">... </span>    <span class="nd">@route</span><span class="p">(</span><span class="s1">&#39;non-python-identifier&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">method2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Handler.dispatch">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">dispatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Handler.dispatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Handler.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispatch a remote procedure call.</p>
<p>If the method is synchronous (possibly blocking), the default executor performs
the call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The procedure name.</p></li>
<li><p><strong>args</strong> (<em>Any</em>) – Positional arguments for the procedure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The procedure’s result, which must be CBOR-serializable.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#runtime.remote.RemoteCallError" title="runtime.remote.RemoteCallError"><strong>RemoteCallError</strong></a> – The procedure call does not exist, timed out, or raised an
    exception.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.MessageType">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">MessageType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#MessageType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.MessageType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.IntEnum" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntEnum</span></code></a></p>
<p>The message type ID.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="runtime.remote.MessageType.REQUEST">
<span class="sig-name descname"><span class="pre">REQUEST</span></span><a class="headerlink" href="#runtime.remote.MessageType.REQUEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Denotes a request message sent by clients. Requires a response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="runtime.remote.MessageType.RESPONSE">
<span class="sig-name descname"><span class="pre">RESPONSE</span></span><a class="headerlink" href="#runtime.remote.MessageType.RESPONSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Denotes a response message sent by services.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="runtime.remote.MessageType.NOTIFICATION">
<span class="sig-name descname"><span class="pre">NOTIFICATION</span></span><a class="headerlink" href="#runtime.remote.MessageType.NOTIFICATION" title="Permalink to this definition">¶</a></dt>
<dd><p>Denotes a notification message sent by clients. Does not require a
response. Unlike the synchronous request-response pattern, notifications may
be pipelined (<em>i.e.</em>, multiple notifications in-flight simultaneously) for
increased throughput.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Node">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><a class="reference internal" href="../_modules/runtime/remote.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>A transceiver of discrete binary messages.</p>
<p>A node wraps an underlying transport, such as a UDP endpoint, that it can repeatedly
open, close, and reopen. <a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> supports the async context manager protocol
(reusable) for automatically managing the transport.</p>
<p>When the transport is open, a node can send to and receive messages from one or more
peers concurrently.</p>
<p>State Diagram:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>start [-&gt; closed]? -&gt; open
    [[-&gt; close -&gt; open]? [-&gt; send]? [-&gt; recv]? [-&gt; closed?]]*
-&gt; close -&gt; end
</pre></div>
</div>
<p>The data segments and address a <a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> sends and receives are opaque to the
node. Their format and semantics depend on the transport and <a class="reference internal" href="#runtime.remote.Endpoint" title="runtime.remote.Endpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Endpoint</span></code></a> the
node works with.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="runtime.remote.Node.send_count">
<span class="sig-name descname"><span class="pre">send_count</span></span><a class="headerlink" href="#runtime.remote.Node.send_count" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of messages sent since the transport was opened.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="runtime.remote.Node.recv_count">
<span class="sig-name descname"><span class="pre">recv_count</span></span><a class="headerlink" href="#runtime.remote.Node.recv_count" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of messages received since the transport was opened.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Node.close">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Node.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Node.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the internal transport.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Node.open">
<em class="property"><span class="pre">abstract</span> <span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Node.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Node.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the internal transport.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Node.recv">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">recv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Node.recv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Node.recv" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a message.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Zero or more data segments and an address, which are transport-dependent.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#runtime.remote.RemoteCallError" title="runtime.remote.RemoteCallError"><strong>RemoteCallError</strong></a> – If the transport cannot receive a message.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Asking the transport directly for messages may be problematic if it is
reopened or does not support concurrent waiters.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Node.send">
<em class="property"><span class="pre">abstract</span> <span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parts</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Node.send"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Node.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parts</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>]</em>) – Zero or more data segments.</p></li>
<li><p><strong>address</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The destination’s address.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#runtime.remote.RemoteCallError" title="runtime.remote.RemoteCallError"><strong>RemoteCallError</strong></a> – If the transport cannot send the message. May reopen the
    internal transport.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="runtime.remote.Node.can_recv">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">can_recv</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#runtime.remote.Node.can_recv" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the transport can receive messages.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="runtime.remote.Node.closed">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#runtime.remote.Node.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the internal transport is closed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.RequestTracker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">RequestTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">futures=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">lower=0</span></em>, <em class="sig-param"><span class="pre">upper=4294967295</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#RequestTracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.RequestTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">runtime.remote.ResponseType</span></code>]</p>
<p>Track outstanding requests and their results.</p>
<p>Every request is associated with a unique request ID (an integer, or an object
serializable as an integer).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>futures</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" title="(in Python v3.10)"><em>collections.abc.MutableMapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>_asyncio.Future</em><em>]</em>) – A mapping from request IDs to futures representing responses.</p></li>
<li><p><strong>lower</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Minimum valid request ID.</p></li>
<li><p><strong>upper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Maximum valid request ID.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.RequestTracker.generate_uid">
<span class="sig-name descname"><span class="pre">generate_uid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attempts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#RequestTracker.generate_uid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.RequestTracker.generate_uid" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a unique request ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>attempts</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The maximum number of times to try to generate an ID.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> – If the tracker could not generate a unique ID. If the ID space
    is sufficiently large, this error is exceedingly rare. Increasing the
    number of attempts or decreasing the number of in-flight requests should
    increase the probability of a unique ID.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.RequestTracker.new_request">
<span class="sig-name descname"><span class="pre">new_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#RequestTracker.new_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.RequestTracker.new_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request_id</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – A unique request identifier. If not provided, a request ID is
randomly generated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The request ID and a future representing the outcome of the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.RequestTracker.register_response">
<span class="sig-name descname"><span class="pre">register_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#RequestTracker.register_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.RequestTracker.register_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a request’s response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The request identifier returned from <a class="reference internal" href="#runtime.remote.RequestTracker.new_request" title="runtime.remote.RequestTracker.new_request"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_request()</span></code></a>.</p></li>
<li><p><strong>result</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>, </em><em>runtime.remote.ResponseType</em><em>]</em>) – The response or exception.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Router">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Router</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frontend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Router"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Router" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Routes messages between :class:<a href="#id1"><span class="problematic" id="id2">`</span></a>Client`s and :class:<a href="#id3"><span class="problematic" id="id4">`</span></a>Service`s that use sockets.</p>
<p>Routers are stateless, duplex, and symmetric (<em>i.e.</em>, require the same format and
exhibit the same behavior on both ends).</p>
<p>Routers have no error handling and may silently drop messages if the destination is
unreachable. Clients must rely on timeouts to determine when to consider a request
failed.</p>
<p>The payloads themselves are opaque to the router and are not deserialized.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frontend</strong> (<a class="reference internal" href="#runtime.remote.SocketNode" title="runtime.remote.SocketNode"><em>runtime.remote.SocketNode</em></a>) – A <code class="docutils literal notranslate"><span class="pre">ROUTER</span></code> socket clients connect to.</p></li>
<li><p><strong>backend</strong> (<a class="reference internal" href="#runtime.remote.SocketNode" title="runtime.remote.SocketNode"><em>runtime.remote.SocketNode</em></a>) – A <code class="docutils literal notranslate"><span class="pre">ROUTER</span></code> socket services connect to.</p></li>
<li><p><strong>route_task</strong> – The background task performing the routing. <a class="reference internal" href="#runtime.remote.Router" title="runtime.remote.Router"><code class="xref py py-class docutils literal notranslate"><span class="pre">Router</span></code></a>
implements the async context manager protocol, which automatically schedules
and cancels this task.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.Router.bind">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frontend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frontend_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Router.bind"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Router.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <a class="reference internal" href="#runtime.remote.Router" title="runtime.remote.Router"><code class="xref py py-class docutils literal notranslate"><span class="pre">Router</span></code></a> bound to the provided addresses.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.Service">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">Service</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">node</span></em>, <em class="sig-param"><span class="pre">concurrency=1</span></em>, <em class="sig-param"><span class="pre">logger=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">handler=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">timeout=30</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#Service"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#runtime.remote.Endpoint" title="runtime.remote.Endpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">runtime.remote.Endpoint</span></code></a></p>
<p>Responds to RPC requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<a class="reference internal" href="#runtime.remote.Handler" title="runtime.remote.Handler"><em>runtime.remote.Handler</em></a>) – The object whose bound methods this service will call.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Maximum duration (in seconds) to execute methods for.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="runtime.remote.SocketNode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">SocketNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">socket_type=5</span></em>, <em class="sig-param"><span class="pre">options=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">bindings=frozenset({})</span></em>, <em class="sig-param"><span class="pre">connections=frozenset({})</span></em>, <em class="sig-param"><span class="pre">subscriptions=&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#SocketNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.SocketNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#runtime.remote.Node" title="runtime.remote.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">runtime.remote.Node</span></code></a></p>
<p>A wrapper around <code class="xref py py-class docutils literal notranslate"><span class="pre">zmq.asyncio.Socket</span></code> for handling timeouts.</p>
<p>When the underlying socket of a <a class="reference internal" href="#runtime.remote.SocketNode" title="runtime.remote.SocketNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">SocketNode</span></code></a> times out, the socket is closed
and rebuilt to reset socket’s internal state. For example, a <code class="docutils literal notranslate"><span class="pre">REQ</span></code> socket may
become stuck in the “listening” state indefinitely if the message it sent gets lost.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>socket_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The socket type (a constant defined under <a class="reference external" href="https://pyzmq.readthedocs.io/en/v22.3.0/api/zmq.html#module-zmq" title="(in PyZMQ v22.3.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zmq</span></code></a>).</p></li>
<li><p><strong>subscriptions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.10)"><em>set</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A set of topics to subscribe to (for <code class="docutils literal notranslate"><span class="pre">SUB</span></code> sockets only).</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>typing.Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>]</em><em>]</em>) – A mapping of <a class="reference external" href="http://api.zeromq.org/4-3:zmq-setsockopt">ZMQ socket option symbols</a> to their values.</p></li>
<li><p><strong>connections</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.10)"><em>frozenset</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A set of addresses to connect to.</p></li>
<li><p><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#frozenset" title="(in Python v3.10)"><em>frozenset</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A set of addresses to bind to.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.SocketNode.set_option">
<span class="sig-name descname"><span class="pre">set_option</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#SocketNode.set_option"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.SocketNode.set_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a socket option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>option</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – A socket option symbol defined by <a class="reference external" href="https://pyzmq.readthedocs.io/en/v22.3.0/api/zmq.html#module-zmq" title="(in PyZMQ v22.3.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zmq</span></code></a>.</p></li>
<li><p><strong>value</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>]</em>) – The option value (the type/format depends on the option).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.SocketNode.subscribe">
<span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#SocketNode.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.SocketNode.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe to a topic (for <code class="docutils literal notranslate"><span class="pre">zmq.SUB</span></code> sockets only).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The topic to subscribe to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="runtime.remote.SocketNode.unsubscribe">
<span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runtime/remote.html#SocketNode.unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.SocketNode.unsubscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Unsubscribe from a topic (for <code class="docutils literal notranslate"><span class="pre">zmq.SUB</span></code> sockets only).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>topic</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The topic to unsubscribe from.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="runtime.remote.SocketNode.identity">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">identity</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a></em><a class="headerlink" href="#runtime.remote.SocketNode.identity" title="Permalink to this definition">¶</a></dt>
<dd><p>The ZMQ identity of this socket.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="runtime.remote.route">
<span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method_or_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.10)"><span class="pre">collections.abc.Callable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.10)"><span class="pre">collections.abc.Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">runtime.remote.RemoteMethod</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/runtime/remote.html#route"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#runtime.remote.route" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">runtime.remote.</span></span><span class="sig-name descname"><span class="pre">route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method_or_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.10)"><span class="pre">collections.abc.Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">runtime.remote.RemoteMethod</span></span></span></dt>
<dd><p>Decorator for marking a bound method as an RPC target.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>method_or_name</strong> – Either the method to be registered or the name it should be
registered under. If the former, the method name is exposed to the
<a class="reference internal" href="#runtime.remote.Handler" title="runtime.remote.Handler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Handler</span></code></a>. The latter is useful for exposing a name that is not a
valid Python identifier.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either an identity decorator (if a name was provided) or the method provided.</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="process.html"
       title="previous chapter">← <code class="docutils literal notranslate"><span class="pre">runtime.process</span></code></a>
  </li>
  <li class="next">
    <a href="service.html"
       title="next chapter"><code class="docutils literal notranslate"><span class="pre">runtime.service</span></code> →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2021, Pioneers in Engineering.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>